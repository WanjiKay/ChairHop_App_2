<div class="container mt-4 profile-page">
  <h1 class="mb-4">My Profile</h1>

  <% if @editing %>
    <!-- Edit mode -->
    <%= form_with model: @user, url: profile_path, method: :patch, local: true do |f| %>
      <div class="mb-3">
        <%= f.label :name, class: "form-label" %>
        <%= f.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :location, class: "form-label" %>
        <%= f.text_field :location, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :username, class: "form-label" %>
        <%= f.text_field :username, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :about, class: "form-label" %>
        <%= f.text_area :about, rows: 4, class: "form-control" %>
      </div>

      <div class="d-flex gap-2">
        <%= f.submit "Save changes", class: "btn btn-primary" %>
        <%= link_to "Cancel", profile_path, class: "btn btn-secondary" %>
      </div>
    <% end %>

  <% else %>
    <!-- Read-only mode -->
    <div class="mb-3">
      <strong>Name:</strong>
      <%= @user.name.presence || "Not set" %>
    </div>

    <div class="mb-3">
      <strong>Location:</strong>
      <%= @user.location.presence || "Not set" %>
    </div>

    <div class="mb-3">
      <strong>Username:</strong>
      <%= @user.username.presence || "Not set" %>
    </div>

    <div class="mb-3">
      <strong>About:</strong><br>
      <%= (@user.about.presence || "Tell us a little about yourself!") %>
    </div>

    <%= link_to "Edit Profile", edit_profile_path, class: "btn btn-primary" %>
  <% end %>
</div>
