<div class="home-page mt-5">

  <!-- HERO SECTION -->
  <section class="hero-section">
    <%= image_tag "blowdryer.png", alt: "Salon", class: "hero-image" %>

    <h1 class="hero-title">Our chairs are always open</h1>
  </section>

  <!-- SEARCH SECTION -->
  <div class="search-section p-4 rounded position-relative mt-3 mb-4">
    <div class="d-flex flex-column gap-2">

      <%= form_with url: appointments_path, method: :get, local: true, class: "d-flex flex-column gap-2" do |f| %>
        <%= f.text_field :query, class: "form-control", placeholder: "Search for service or stylist" %>
        <%= f.submit "Search", class: "btn btn-primary px-4" %>
      <% end %>

    </div>
  </div>

  <!-- USER APPOINTMENTS LINK -->
  <% if defined?(user_signed_in?) && user_signed_in? %>
    <div class="mb-3 text-start">
      <%= link_to my_appointments_path, class: "btn btn-primary" do %>
        My Appointments
      <% end %>
    </div>

  <% end %>

  <!-- APPOINTMENTS SECTION -->
  <% if @upcoming_appointments.any? %>
    <h2 class="section-title text-center mb-3">Available Appointments</h2>

    <div class="appointments-list row g-3 justify-content-center">
      <% @upcoming_appointments.each do |appointment| %>
        <div class="col-md-6">
          <%= link_to appointment_path(appointment), class: "text-decoration-none" do %>
            <div class="card appointment-card">
              <% if appointment.image.attached? %>
                <%= cl_image_tag appointment.image.key, class: "card-img-top", alt: appointment.stylist.name %>
              <% else %>
                <%= image_tag "https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400", class: "card-img-top", alt: "Salon" %>
              <% end %>
              <div class="card-body">
                <h5 class="card-title"><%= appointment.salon %></h5>
                <p class="card-text">
                  <%= appointment.location %>
                  <% if appointment.time.present? %>
                    <br><small><%= appointment.time.strftime("%b %d, %Y at %I:%M %p") %></small>
                  <% end %>
                </p>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center mt-4">No upcoming appointments available.</p>
  <% end %>

</div>
