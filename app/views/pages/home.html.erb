
<div class="home-page">
  <div class="container mt-4" >
    <h1>Chair Hop</h1>
    <p>Our chair is always open</p>

  <% signed_in = (defined?(user_signed_in?) && user_signed_in?) %>


  </div>


  <h2 class="text-center mb-3 section-title">Available Appointments</h2>

  <% if @upcoming_appointments.any? %>
    <div class="list-group">

      <div class="search-section p-4 rounded position-relative">
        <div class="d-flex align-items-center gap-2">

          <%= form_with url: appointments_path, method: :get, local: true, class: "d-flex flex-grow-1 gap-2" do |f| %>
            <%= f.text_field :query, class: "form-control", placeholder: "Search for service or stylist" %>
            <%= f.submit "Search", class: "btn btn-primary px-4" %>
          <% end %>

          <% if defined?(chats_path) %>
            <%= link_to chats_path, class: "btn btn-info chat-bot-btn d-flex align-items-center justify-content-center" do %>
            Chat Bot
            <% end %>
          <% else %>
            <%= link_to "#", class: "btn btn-info chat-bot-btn d-flex align-items-center justify-content-center" do %>
            Chat Bot
            <% end %>
          <% end %>

        </div>
      </div>

      <h3 class="mt-4 mb-3">Near By Appointments:</h3>
      <div class="row g-3">
        <% if @upcoming_appointments.present? %>
          <% @upcoming_appointments.each do |appointment| %>
            <div class="col-md-6">
              <%= link_to appointment_path(appointment), class: "text-decoration-none" do %>
                <div class="card appointment-card">
                  <% if appointment.image.attached? %>
                    <%= cl_image_tag appointment.image.key, class: "card-img-top", alt: appointment.salon %>
                  <% else %>
                    <%= image_tag "https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400", class: "card-img-top", alt: "Salon" %>
                  <% end %>
                  <div class="card-body">
                    <h5 class="card-title"><%= appointment.salon %></h5>
                    <p class="card-text">
                      <%= appointment.location %>
                      <% if appointment.time.present? %>
                        <br><small><%= appointment.time.strftime("%b %d, %Y at %I:%M %p") %></small>
                      <% end %>
                    </p>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
